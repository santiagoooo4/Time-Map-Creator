body {
    background:#232332;
    color:#E2E2E2;
    font-family:sans-serif;
    margin:0;
    padding: 10px;
}
header {
    text-align: center;
    background: #181a1b;
    padding: 22px 0 10px 0;
    margin-bottom: 16px;
    border-radius: 0 0 18px 18px;
    box-shadow: 0 3px 16px #222b;
}
header h1 {
    color:#42d262;
    margin:0 0 8px 0;
    font-size:2.1rem;
    letter-spacing:0.03em;
}
header .subtitle {
    color: #79e6bc;
    font-size: 1.06rem;
}
.top-bar {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    padding: 17px 24px 8px 24px;
    margin-bottom: 9px;
    background:#0a0a0a;
    border-radius: 8px;
    gap: 16px;
    flex-wrap: wrap;
}
.inputs-row {
    display: flex;
    gap: 18px;
    align-items: center;
    flex-wrap: wrap;
}
.inputs-row label {
    display: flex;
    gap: 8px;
    align-items: center;
}
.inputs-row input[type=file],
.inputs-row input[type=number] {
    padding: 4px 8px;
}
.file-buttons-row {
    display: flex;
    gap: 10px;
    align-items: center;
}
.file-buttons-row button {
    padding: 7px 14px;
    font-size: 0.97rem;
    border-radius: 6px;
    border: none;
    background: #42d262;
    color: white;
    cursor: pointer;
}
.file-buttons-row button:disabled {
    background: #444 !important;
    cursor: not-allowed;
}
.stats-panels {
    display: flex;
    gap: 25px;
    align-items: flex-start;
    padding: 7px 28px 10px 28px;
    margin-bottom:18px;
}
.tap-tempo-box {
    background:#212334;
    border:2px solid #42d262;
    border-radius:14px;
    width:100px;
    height:100px;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    cursor:pointer;
    box-shadow: 0 2px 8px #42d26238;
    transition: background 0.2s;
}
.tap-tempo-box:active {
    background:#32a852;
}
.tap-tempo-icon {
    font-size:3.1rem;
    margin-bottom:7px;
}
.tap-tempo-label {
    color:#42d262;
    font-weight:bold;
    font-size:1.06rem;
}
.bpm-panel {
    background:#1d2234;
    border:2px solid #29b6f6;
    border-radius:14px;
    min-width:120px;
    height:100px;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    box-shadow: 0 2px 8px #29b6f638;
}
.bpm-label {
    color:#29b6f6;
    font-size:1.18rem;
    font-weight:bold;
    margin-bottom:4px;
}
.bpm-value {
    color:#fff;
    font-size:2.2rem;
    font-weight:bold;
}
.audio-info-panel {
    background:#1c252f;
    border:2px solid #999e;
    border-radius:14px;
    min-width:190px;
    padding: 14px 24px 9px 24px;
    color:#aaa;
    font-size:1rem;
    box-shadow: 0 2px 8px #1c252f4c;
    display:flex;
    flex-direction:column;
    gap:2px;
}
.audio-info-panel b {
    color: #ffefbc;
    font-weight: 500;
}
.tools-bar {
    display: flex;
    gap:14px;
    align-items:center;
    margin: 0 24px 16px 24px;
    background:#191a1b;
    padding: 8px 16px;
    border-radius: 8px;
}
.tools-bar b {
    color:#aaa;
    margin-right:5px;
}
.tools-bar button {
    border:none;
    background:#42d262;
    color:white;
    border-radius:6px;
    padding:8px 14px;
    cursor:pointer;
    font-size:1rem;
    font-weight:500;
    transition: background 0.15s;
}
.tools-bar button.active { background:#FF9800; }
.tools-bar button:hover { opacity:0.87; }
.tools-bar button:disabled { background:#444; cursor:not-allowed; }
.waveform-container-area {
    display: flex;
    position: relative;
    width: 100%;
    align-items: flex-start;
}
.zoom-controls-fixed {
    position: absolute;
    left: 20px;
    top: 20px;
    z-index: 50;
}
.waveform-canvas-wrap {
    position:relative;
    overflow-x:auto;
    overflow-y:hidden;
    background:#101112;
    border:2px solid #42d262;
    border-radius:9px;
    width:100%;
    height:240px;
    margin-bottom:15px;
}
#waveform { display:block; cursor:crosshair;}
.zoom-controls {
    display:flex; gap:7px; align-items:center;
    background:#191a1b;
    border-radius:8px;
    border:1px solid #42d262;
    padding:7px;
    z-index:9;
    position: fixed !important;
    top: 120px !important;
    right: 35px !important;
    z-index: 999 !important;
}
.zoom-controls button {
    padding:5px 8px; font-size:1rem;
    background:#42d262; color:white;
    border:none; border-radius:4px;
}
.zoom-controls button:active { 
    background:#2196F3; 
}
.zoom-controls span {
    color:#aaa;
    font-size:1.01rem; 
    min-width:32px; 
    text-align:center;
}
.cursor-grab-area {
    position: absolute;
    width: 18px;
    height: 26px;
    top: -14px;
    background: transparent;
    cursor: grab;
}
.cursor-grab-area:hover {
    background: rgba(255,255,0,0.09);
}

/* Triangulito */
.canvas-cursor-triangle {
    fill: #ff3243;
    stroke: #fff200;
    stroke-width:2;
}
.waveform-cursor {
    position: absolute;
    width: 0;
    pointer-events: none;
}
.cursor-repro {
    pointer-events: auto;
}
.waveform-cursor-indicator {
    position: absolute;
    left: -6px;
    top: -16px;
    width: 22px;
    height: 22px;
    pointer-events: none;
}
.waveform-cursor-grabarea {
    position: absolute;
    left: -11px;
    top: -20px;
    width: 30px;
    height: 30px;
    z-index: 20;
    cursor: pointer;
    background: transparent;
}
.waveform-cursor-triangle {
    width: 22px;
    height: 22px;
    display: block;
    fill: #ff3243;
    stroke: #212334;
    stroke-width: 2.5;
    opacity: 0.96;
}
.graph-wrap, .durcompas-wrap {
    position:relative;
    overflow-x:auto; overflow-y:hidden;
    background:#101112;
    border-radius:9px;
    width:100%; margin-bottom:10px;
}
.graph-wrap { border:2px solid #2196F3; height:142px; }
.durcompas-wrap { border:2px solid #FFC107; height:142px; }
#bpmGraph, #durCompasGraph { display:block; }
.playback-controls-row {
    display: flex;
    align-items: center;
    gap: 16px;
    background: #191a1b;
    margin: 0 24px 12px 24px;
    padding: 7px 13px;
    border-radius: 8px;
}
.playback-controls-row label {
    display: flex;
    align-items: center;
    gap: 7px;
    color: #9ff;
    font-size: 0.98rem;
}
.playback-controls-row button {
    border:none; background:#42d262;
    color:white; border-radius:6px;
    padding:8px 16px; cursor:pointer; font-size:1rem; font-weight:500;
}
.playback-controls-row button:disabled { background:#444; cursor:not-allowed; }
.side-data {
    margin: 0 18px 0 18px;
}
.data-panel {
    font-size:14px; color:#bec6c9;
    background:#181a1b;
    padding:13px 18px;
    border-radius:7px;
    margin-bottom:10px;
    border:1.5px solid #101112;
    box-shadow: 0 1px 9px #19223144;
}
.data-panel span {
    display:block;
    margin-bottom:8px;
}
.data-panel b {
    color:#61e97b;
    font-weight: 600;
}
.marker-list {
    max-height:150px;
    overflow-y:auto;
    background:#181a1b;
    margin:8px 0; padding:9px 11px;
    border-radius:8px;
}
.marker-item {
    padding:5px; color:#fff;
    font-size:13px; margin-bottom:2px;
    background: #232b3f;
    border-radius:5px;
    box-shadow: 0 2px 8px #232b3f38;
    border:1px solid #2222;
}
.fragment-dialog-backdrop {
    position:fixed; top:0; left:0;
    width:100vw; height:100vh;
    background:#000A; z-index:20;
    display:flex; align-items:center; justify-content:center;
}
.fragment-dialog {
    background:#222; border-radius:13px;
    box-shadow:0 2px 17px #000b;
    padding:32px 26px 20px 26px;
    min-width:340px;
}
.fragment-dialog h3 { margin:0 0 15px 0; color:#42d262;}
.fragment-dialog label { color:#ccc; display:flex; gap:6px; align-items:center; margin:7px 0; font-size:1.09rem;}
.fragment-dialog input[type="number"] {
    width:90px; padding:5px 9px; border-radius:4px;
    background:#191a1b; border:1px solid #42d262; color:#e2e2e2;
}
.fragment-dialog-buttons {margin-top:20px; display:flex; gap:18px; justify-content:right;}
.fragment-dialog-buttons button { padding: 7px 22px;}
.fragment-dialog .toggle-row {margin-bottom:10px; display:flex; align-items:center; gap:10px;}
@media(max-width:900px), screen and (max-width: 900px) {
    header { font-size: 1rem; }
    .top-bar, .stats-panels, .tools-bar, .playback-controls-row { flex-direction: column !important; padding:10px 10px !important; }
    .inputs-row { flex-direction:column; gap: 9px; }
    .stats-panels { gap: 12px !important; padding: 7px 10px !important; }
    .audio-info-panel { padding: 10px 9px 8px 10px; min-width: 0; }
    .side-data { margin: 0 4px 0 4px; }
}
